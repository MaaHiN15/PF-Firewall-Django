
# MacOS PF Firewall

This repo consists django web application specifically made for PF firewall. Our aim is to create UI for PF firewall. 


## Features

- Block/Allow IP ranges
- Nat/Binat configuration
- Blocking domains using IP



## Installation

To install our project

```bash
  git clone https://github.com/MaaHiN15/PF-Firewall-Django
  cd PF-Firewall-Django
```
    
## Deployment

To deploy this project run
```python
    pip install -r req.txt 
    sudo python manage.py makemigrations app
    sudo python manage.py migrate
    sudo python manage.py runserver
```



## Working
                                                   
#### In the home page, Firewall Status 

- We can enable/disable Firewall using the toggle 

- Before attempt to apply the pf.conf file, make sure PF firewall toggle is enabled. 

#### Apply PF Firewall 

- Using single click on Apply Button we can apply the pf.conf file which is shown in the view tab. 

- Using Reset button, we can reset pf.conf file as well as database things. 

- We can get the status of the apply/reset using the pop up shown in the bottom of the page (Either success or failure) 

#### Basic Options 

- Some of the basic options which is related to PF firewall is given in the type of form.  

- We can update the form and submit it to make changes in pf.conf file. 

#### Table Creation 

- Table holds some set of ip addresses or CIDR ranges which is very useful for later purposes. 

- Make sure not to use ‘table’ as a table name and table name should be one single word (Can include numbers) 

#### Filter Rules Using Tables 

- Before using this feature, make sure you’re created tables. 

- This form has lot of things to do.  

- In the source address and destination address fields have list of tables that we’ve already created, we can choose from that if needed.  

- If you’re not ok with choosing from tables, then go with Filter Rules (Manual Entry) section. 

- Check View page to see the generated pf.conf file, if you need to edit specific position in that file, you can use position field to choose the exact position. Otherwise, just leave as blank. 

- If your current rule has more priority, then other rules then check Force field. 

- If you want to log the current rules logs, then check logs. 

                  

 

 

#### Filter Rules (Manual Entry) 

- Same as before, here the change is, you can manually type your IP / CIDR in source and destination address fields. 

               

#### NAT / BINAT Rules 

- Choose whether you need NAT or BINAT 

- Here you must specify the interface 

- Also, must specify NAT/BINAT IP 

          

#### Block Domain 

- Here, you can block domains using their name without protocols (http/https) 

- Don’t include URL endpoints (More specifically trailing slashes) 

               

#### In the view page, 

- You have two things to see. One is line numbers of the pf.conf file. Another thing is the line which is generated by the application based on your inputs. 

- Check that, if you’re satisfied with this means go to home page, apply pf.conf file. 

              

#### In the Edit page, 

- You can view what you’ve entered. If not satisfied, then delete that. It will delete data stored in DB as well as rule written in pf.conf file. 

           

#### Known Issues: 

- While applying pf.conf file, if any syntax error came, then try to review your file in view page. Make sure application generated code is correct. Then apply it. If you are overwhelmed with pf.conf file, then try to reset it using reset button. It will clear all data stored in DB as well as will recreate pf.conf file. 

- If your rules include interfaces, then check before applying it. Because application will fetch all the interfaces programmatically and load that data using jinja templating. Make sure you’ve exact interface that is fetched by python. 

- Don’t use “block in all” and “block out all” rules. Because this rule will stop network incoming and outgoing from and to application. Then application won’t work. 

 
## Authors

- [Mahendran](https://www.github.com/MaaHiN15)


## Feedback

If you have any feedback, please reach out to us at devsensei.mahendran@gmail.com
